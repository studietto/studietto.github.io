<html>
	<body>
		<h1>Products</h1>
		<ul>
			<li>Product 123 <input id="chkNotifyInStock123" type="checkbox" onclick="toggleNotifyTag(this, '123');">Notify</input></li>
			<li>Product 456 <input id="chkNotifyInStock456" type="checkbox" onclick="toggleNotifyTag(this, '456');">Notify</input></li>
			<li>Product 789 <input id="chkNotifyInStock789" type="checkbox" onclick="toggleNotifyTag(this, '789');">Notify</input></li>									
		</ul>
		<script type="text/javascript">
		// 86acbd31cd7c09cf30acb66d2fbedc91daa48b86:1528734103.65
		!function(n,t,c,e,u){function r(n){try{f=n(u)}catch(n){return h=n,void i(p,n)}i(s,f)}function i(n,t){for(var c=0;c<n.length;c++)d(n[c],t);
		}function o(n,t){return n&&(f?d(n,f):s.push(n)),t&&(h?d(t,h):p.push(t)),l}function a(n){return o(!1,n)}function d(t,c){
		n.setTimeout(function(){t(c)},0)}var f,h,s=[],p=[],l={then:o,catch:a,_setup:r};n[e]=l;var v=t.createElement("script");
		v.src=c,v.async=!0,v.id="_uasdk",v.rel=e,t.head.appendChild(v)}(window,document,'https://web-sdk.urbanairship.com/notify/v1/ua-sdk.min.js',
		  'UA', {
			appKey: 'hE355jqYSLuSjo9ArwvrPQ',
			token: 'MTpoRTM1NWpxWVNMdVNqbzlBcnd2clBROm1mYmFwR0tOZU1rZ2tTOUQxSU51Nng4UDdHN1NNcmN3Q0FHRUtYODd3ZWc',
			vapidPublicKey: 'BO1X3qTEbgkJ9VdDkkmuDuLa5lhkqG2bOPrl_FqcmHfeOMeFyJrgW8R8IOOR2Nrjw4_n6XmcTn3u6RGargdlopQ='
		  });
		</script>
		<script type="text/javascript">
			UA.then(function(sdk) {
				if (sdk.isSupported && sdk.canRegister) {
					sdk.register();
				
					document.getElementById("chkNotifyInStock123").checked = sdk.channel.tags.has("notify-instock-123");
					document.getElementById("chkNotifyInStock456").checked = sdk.channel.tags.has("notify-instock-456");
					document.getElementById("chkNotifyInStock789").checked = sdk.channel.tags.has("notify-instock-789");
				}
			}).catch(function(err) {
				console.log(err)
			})
		  
			function toggleNotifyTag(chk, id) {
				UA.then(function(sdk) {
					if (!sdk.channel.optedIn && chk.checked) {
						alert("You need to accept the browser permission request before being able to use this...");
						chk.checked = false;
						console.log("Notifications not enabled, nothing to do...");
						return;
					}
				
					var tag = "notify-instock-" + id;
					if (chk.checked) {
						sdk.channel.tags.add(tag);
						console.log("added notifications for productId " + id);
					} else {
						sdk.channel.tags.remove(tag);
						console.log("removed notifications for productId " + id);
					}
				}).catch(function(err) {
					console.log(err)
				})
			}
		</script>	
	</body>
</html>
